# Kcode 전체 개발 로드맵 v2.2

> 한글 키워드 AI 제어 언어 — 언어 엔진 → WEB IDE → UI/렌더링 → 생태계
> 
> **현재 버전: v18.1.0** ✅

-----

## 핵심 아키텍처 방향

```
┌─────────────────────────────────────────────────────┐
│                  Kcode WEB IDE                       │
│  메뉴바 │ 문법탐색기 │ 편집기(블록+타이핑) │ AI채팅 │ 출력  │
│              표준객체 팔레트 / 렌더링 캔버스           │
└────────────────────┬────────────────────────────────┘
                     │  WASM / kserver
          ┌──────────┴──────────┐
       KVM 엔진              풀 엔진
   (klexer+kparser          (+kinterp
    +kc_bcgen+kc_vm)        +kc_tensor
                            +kc_autograd)
          │
    ┌─────┴──────┐
  MCP           REST API
  서버          (kserver)
    │
  AI 앱 / 외부 시스템 / 산업 제어
```

-----

## ✅ 완료 (v18.1.0 이하)

|버전      |내용                           |
|--------|-----------------------------|
|~v10.1.0|렉서/파서/인터프리터/C생성/LLVM IR 기반 완성|
|v11.0.0 |텐서 자료형                       |
|v13.0.0 |자동미분(Autograd) + GC          |
|v14.0.0 |MCP 서버 런타임                   |
|v15.0.0 |바이트코드 VM (KVM)               |
|v16.0.0 |산업/임베디드 (GPIO/I2C/MQTT/ROS2) |
|v16.5.1 |WebAssembly 빌드               |
|v17.0.0 |안전 규격 (IEC 61508 / ISO 26262)|
|v18.0.0 |온디바이스 AI (ONNX/TinyML/연합학습)  |
|v18.1.0 |내장함수 31종 추가                  |

-----

## 🔲 v18.5.0 — 온톨로지 시스템

> 지식 그래프 + SPARQL + MCP 자동 노출

|단계|내용                                      |상태|
|--|----------------------------------------|--|
|1 |kc_ontology.h/c — 그래프 CRUD + 추론기        |⬜ |
|2 |kc_ont_query.c — 한글 질의 + SPARQL         |⬜ |
|3 |kc_ont_import.c — JSON-LD / CSV / Turtle|⬜ |
|4 |kc_ont_server.c — REST + WebSocket      |⬜ |
|5 |kc_ont_remote.h/c — 외부 서버 클라이언트         |⬜ |
|6 |klexer/kparser/kinterp 온톨로지 토큰 연동       |⬜ |
|7 |MCP 자동 노출                               |⬜ |

-----

## 🔲 v18.7.0 — Concept Identity / Vector Space

> 의미 → 수학 → 실행 → 검증 → 의미 → 기억  
> 온톨로지 위에 동작하는 의미 기반 벡터 추론 엔진

### 아키텍처 흐름

```
입력 (자연어 / Kcode 구문)
    │
    ▼
[1] Semantic Layer          ← 개발자 설정 영역
    (개념 정의 / 관계 모델 / 제약 조건)
    │
    ▼
[2] Memory Layer            ← kc_ontology (기구현) + 신규 확장
    ├── Ontology DB         ← 개발자 정의
    ├── Vector DB           ← 엔진 관리
    └── State/Log DB ⭐     ← 엔진 자동 기록 (경험 축적)
    │
    ▼
[3] Vectorization           ← kc_tensor 확장
    (의미 구조 → 벡터 공간)
    │
    ▼
[4] Operation Definition    ← kinterp + 계약 시스템 연동
    (실행 계획 생성)
    │
    ▼
[5] IR / Bytecode            ← 기구현 (kc_bcgen / kc_vm)
    │
    ▼
[6] Accelerator              ← 기구현 (가속기 블록 v8.2)
    (CPU / GPU / NPU)
    │
    ▼
[7] Validation               ← 계약 시스템 + kc_ontology 연동
    (PASS / FAIL)
    │
    ▼
[8] Trace / Debug            ← kc_trace 신규
    (실행 경로 설명 생성)
    │
    ▼
[9] Semantic Reconstruction  ← kc_ont_query 역방향 확장
    (벡터 결과 → 의미 복원)
    │
    ▼
[10] Learning Loop           ← kc_ontology 학습 거버넌스 확장
    (결과 → Memory 피드백 → 규칙 자동 갱신)
```

### 구현 / 개발자 설정 분류

|레이어                        |담당        |내용                                      |
|---------------------------|----------|----------------------------------------|
|[1] Semantic Layer         |**개발자 설정**|`.han` 파일 내 `온톨로지` 블록으로 개념/관계/제약 선언     |
|[2.1] Ontology DB          |**개발자 설정**|OWL/Turtle/JSON-LD 제공 또는 K문법으로 스키마 작성   |
|[2.2] Vector DB            |**개발자 설정**|임베딩 모델 선택, 유사도 임계값, 벡터화 대상 필드 지정        |
|[2.3] State/Log DB         |**개발자 설정**|로그 경로, 보존 정책, 민감정보 거버넌스 규칙              |
|[3] Vectorization          |**엔진 구현** |`kc_tensor` + `kc_ontology` 연결, 상태 벡터 구성|
|[4] Operation Def          |**엔진 구현** |`kinterp` 추론 선택 정책, 실행 계획 생성            |
|[5] IR                     |**기구현**   |`kc_bcgen` / `kc_vm`                    |
|[6] Accelerator            |**기구현**   |가속기 블록                                  |
|[7] Validation             |**엔진 구현** |계약 시스템 + 온톨로지 제약 검사 연동                  |
|[8] Trace/Debug            |**엔진 구현** |`kc_trace` 신규 — 판단 경로 설명 생성             |
|[9] Semantic Reconstruction|**엔진 구현** |`kc_ont_query` 역변환 — 벡터 → 의미 복원         |
|[10] Learning Loop         |**엔진 구현** |`kc_ontology` 거버넌스 확장 — 피드백 자동 등록       |

### 재생산 라벨 — 엔진 자동 추적

> Learning Loop 사이클 완료 시점에만 기록 — 엔진 부하 최소화

#### 계보 표기 체계

지식 ID는 **문자(계보) + 숫자(가공량)** 조합으로 자동 생성됩니다.

```
A          원조
A1         부분수정 10회
A2         부분수정 20회
...
A9999      부분수정 99990회
B = A10000 숫자 10000 도달 → 다음 문자로 자동 진급
B1         부분수정 10회 추가
...
E10000     → 5문자 + 숫자 한계 → 새 루트 독립
```

**병합 시 가공 횟수 합산**

```
A4 + B4  = AB8     가공 4 + 4 = 8
AB8 + C2 = ABC10   가공 8 + 2 = 10
A4000 + B4000 = AB8000
AB8000 + C2500 = ABC10500 → 숫자 10000 초과 → ABCD (자동 진급)
```

**계보 진급 규칙 전체**

|규칙   |기준              |동작                 |
|-----|----------------|-------------------|
|부분수정 |10회마다           |숫자 +1              |
|전체변경 |1회              |다음 문자로 진급          |
|병합   |A4 + B4         |문자 연결 + 숫자 합산 → AB8|
|숫자 한계|10000 도달        |다음 문자로 자동 진급       |
|이식   |항상 부분만 가능       |숫자만 누적, 문자 변경 없음   |
|독립 기준|문자 5개 + 숫자 10000|새 루트 독립 + 참조링크 보존  |

**표기 읽는 법**

```
ABC10500
│││└──── 가공량 (부분수정 누적 + 병합 합산)
││└───── C 에서 이식/병합
│└────── B 에서 이식/병합
└─────── A 가 원조
```

-----

**엔진이 자동으로 기록하는 항목**

|항목   |설명                   |기록 시점   |
|-----|---------------------|--------|
|계보ID |문자+숫자 자동 계산          |사이클 완료 시|
|파생방법 |학습루프 / 병합 / 외부이식     |사이클 완료 시|
|파생일시 |사이클 완료 타임스탬프         |사이클 완료 시|
|변경범위 |전체/부분 (변경량 기준 자동 판단) |사이클 완료 시|
|메트릭요약|신뢰도 / 사이클 수 / 변경 규칙 수|사이클 완료 시|
|라이선스 |원본에서 자동 상속           |사이클 완료 시|

**기록하지 않는 항목 (부하 방지)**

|항목       |이유              |
|---------|----------------|
|텐서 매 연산  |과정 — 사이클에 포함됨   |
|역전파 매 스텝 |과정 — 사이클에 포함됨   |
|규칙 등록 매 건|사이클 완료 요약으로 충분  |
|매 스텝 메트릭 |사이클 완료 시 요약값만 기록|

**경량 메트릭 히스토리** (MLflow 절충 방식)

```
사이클 완료마다:
    신뢰도 요약값      기록  ← 추세 감지용
    변경된 파라미터만  기록  ← 전체 아님
    시스템 이상 시만   기록  ← 정상이면 생략
    버전 변경 시만     소스 스냅샷 저장

신뢰도 하락 추세 감지 → 재학습 트리거 자동 발생
```

**사용자 선택 추가 항목**

```han
// 지식뱅크 내 재생산라벨 블록 — 없으면 저장/불러오기 차단
재생산라벨                           // 블록만 있으면 엔진이 전부 자동 채움
    메모 = "3공장 이전 후 재학습분"  // 선택 — 사람이 붙이는 맥락 메모
    태그 = ["긴급패치", "품질이슈"]  // 선택 — 분류용 태그
재생산라벨끝
// 메모/태그 없으면 엔진 자동 채움 항목만으로 구성
```

### Kcode 문법 예시

```han
// 개발자 설정 — 의미 레이어 선언
온톨로지 "공장지식":
    개념 기계 속성=[이름, 상태, 온도]
    개념 불량품 속성=[원인, 발생시간]
    관계 기계 → 생산 → 제품
    제약 온도 < 100
온톨로지끝

// 엔진 처리 — 벡터 추론
의미추론 "불량감지":
    입력 = 센서스트림
    벡터화 = 자동
    검증 = 온톨로지제약
    추적 = 참
    학습 = 참
의미추론끝
```

|단계|내용                                                       |신규 파일|상태|
|--|---------------------------------------------------------|-----|--|
|1 |`kc_trace.h/c` — Trace/Debug Layer (실행 경로 기록 + 설명 생성)    |신규 2종|⬜ |
|2 |`kc_tensor` + `kc_ontology` 벡터화 연결 — 의미 구조 → 상태 벡터       |기존 확장|⬜ |
|3 |`kc_ont_query.c` 역변환 확장 — 벡터 결과 → 의미 복원                  |기존 확장|⬜ |
|4 |State/Log DB 영속화 — 실행 결과 / 성공·실패 / 검증 결과 저장              |신규 1종|⬜ |
|5 |Learning Loop 완성 — 결과 피드백 → 온톨로지 규칙 자동 등록                |기존 확장|⬜ |
|6 |재생산 라벨 엔진 내장 — 사이클 완료 시점 자동 추적 + 메트릭 요약 기록               |기존 확장|⬜ |
|7 |경량 메트릭 히스토리 — 신뢰도 추세 감지 + 재학습 자동 트리거                     |기존 확장|⬜ |
|8 |Operation Definition 정책 고도화 — 추론 선택 + 실행 계획 생성           |기존 확장|⬜ |
|9 |klexer/kparser — `의미추론` / `벡터화` / `의미복원` / `재생산라벨` 키워드 추가|기존 확장|⬜ |
|10|kinterp/kcodegen/kcodegen_llvm 연동                        |기존 확장|⬜ |
|11|통합 테스트 — 전체 10개 레이어 + 재생산 라벨 흐름 검증                       |—    |⬜ |

-----

## 🔲 v18.9.0 — 지식 뱅크 (Knowledge Bank)

> 학습된 지식의 저장 · 버전 관리 · 이식 · 외부 AI 공유 허브
> **법적 안전 + 보안 + 재생산 추적 + 권한 계층을 구조적으로 보장**

### 전체 구조

```
+-------------------------------------------------------------+
|                      Knowledge Bank                         |
|                                                             |
|  +-----------+   +-----------+   +---------------------+   |
|  | 온톨로지  |   | Vector DB |   | ONNX 모델 저장소    |   |
|  | 규칙 저장소|   | 임베딩 저장|   | 가중치 버전 관리    |   |
|  +-----+-----+   +-----+-----+   +---------+-----------+   |
|        +---------------+-----------------+                  |
|                        |                                    |
|     +------------------+------------------+                 |
|     v                  v                  v                 |
| [필수게이트 3종]  [보안레이어 3종]    [권한 계층]            |
| 소유권 선언      무결성 서명          개발자/소유자/사용자    |
| 민감정보 스캔    변조 감지            접근제어/감사로그       |
| 검증이력 확인    격리 저장            소유권이전/증거출력     |
|                        |                                    |
|                 [재생산 라벨]                                |
|                 계보ID + 혈통추적                            |
|                 롤백 3단계 보관                              |
+----------------------------+--------------------------------+
                             |
          +------------------+------------------+
          v                  v                  v
     Kcode 시스템        외부 AI 연동       지식 레지스트리
     (이식/재사용)       (MCP/REST)        (공개/비공개)
```

### 지식 뱅크가 관리하는 4가지 자산

|자산              |설명               |이식 조건       |
|----------------|-----------------|------------|
|**온톨로지 규칙**     |학습으로 자동 생성된 추론 규칙|항상 이식 가능    |
|**벡터 스냅샷**      |Vector DB 임베딩 전체 |동일 임베딩 모델 필요|
|**ONNX 모델**     |학습된 신경망 가중치      |모델 구조 일치 필요 |
|**State/Log 요약**|성공/실패 패턴 통계      |항상 이식 가능    |

-----

### A. 권한 계층 구조

```
개발자 (ID 없음 — 설계 시점에만 관여)
    소유자 고정 / 변경가능 선택 → 이후 변경 불가
        ↓
소유자 (배포자ID + 저장일시 + 사용자ID 조합)
    저장 / 불러오기 / 등업 / 폐기
    읽기권한 설정 (사용자 지정)
    소유권 이전 (변경가능일 때만)
        ↓
사용자 (소유자에게 위임받은 범위)
    등업 / 읽기
    소유권은 소유자에게 유지
    기여자 목록에 자동 추가
        ↓
비허용자
    접근 불가
```

**사용자ID 유형**

|유형  |형식                  |예시              |
|----|--------------------|----------------|
|사람  |UID-xxx             |UID-001         |
|기계  |SN-xxx / MN-xxx     |SN-A1234        |
|외부AI|SESSION-xxx         |SESSION-a3f9b2c1|
|자동학습|시스템 소유자 + 기계번호 자동 부여|—               |

**읽기 권한 설정**

```han
읽기권한:
    공개여부 = 비공개      // 비공개 | 전체공개 | 지정공개
    허용ID = [UID-002, SN-A1234]   // 지정공개일 때만
읽기권한끝
```

**소유자 변경 정책**

```
소유자변경허용 = 참    변경 시점에 즉시 처리
소유자변경허용 = 거짓  민원 접수 → 처리 시점에 변경
                       민원 없으면 변경 불가 (외부 로직)
```

**ID 폐기 처리**

```
UID 삭제 or 기계 폐기 → 해당 ID 지식 전체 리셋
새 ID로 재등록 필요
```

-----

### B. 필수 게이트 3개 — 법적 안전 보장

> 설정으로 끌 수 없으며 저장/불러오기 경로에 하드코딩됩니다.

**게이트 1 — 소유권 선언** (저장 시 강제, 누락 시 저장 차단)

```han
지식뱅크 "공장AI_v1":
    배포자 = "주식회사 Kcode"
    소유자변경허용 = 참        // 개발자가 설계 시점에 결정
    저장일시 = 현재            // 엔진 자동
    사용자ID = "UID-001"

    온톨로지저장 = "공장지식"
    벡터저장 = 참
    모델저장 = ["불량감지.onnx"]
    크기제한 = 500MB           // 선택 — 기본값: 기억장치 한계

    재생산라벨                 // 블록 없으면 저장/불러오기 차단
        메모 = "3공장 이전 후 재학습분"  // 선택
        태그 = ["긴급패치"]              // 선택
    재생산라벨끝

지식뱅크끝
```

**병합 시 메타데이터 처리**

```
A (배포자: Kcode, 저장일시: 2024-01-01, 사용자ID: UID-001)
+
B (배포자: Kcode, 저장일시: 2024-06-01, 사용자ID: SN-A1234)
↓
AB
    배포자   = Kcode
    저장일시 = 병합 시점 (현재)
    사용자ID = [UID-001, SN-A1234]  ← 전부 누적

등업 시:
    배포자   = 현재 소유자 유지
    저장일시 = 등업 시점 갱신
    사용자ID = 등업한 행위자만
```

**자동학습 생성 지식**

```
배포자   = 시스템 소유자 자동 부여
사용자ID = 기계번호 또는 시리얼번호 자동 부여
```

**게이트 2 — 민감정보 스캔** (내보내기 전 자동 실행, 통과 없이 파일 생성 불가)

```han
    민감정보스캔:
        개인정보패턴 = [이름, 전화번호, 주민번호, 이메일]
        탐지시처리 = 차단      // 차단 | 자동제거 | 익명화
        스캔로그 = 참
    민감정보스캔끝
```

**게이트 3 — 검증 이력 확인** (불러올 때 강제)

```han
지식불러오기 "공장AI_v1":
    온톨로지병합 = 참
    벡터재생성 = 거짓
    모델불러오기 = ["불량감지.onnx"]
    이력확인:
        소유권검사 = 참
        민감정보스캔확인 = 참
        안전시스템적용 = 참
    이력확인끝
지식불러오기끝
```

-----

### C. 보안 레이어 3종 — 해킹/변조 방어

```
무결성 서명:  저장 시 SHA-256 → .sig 봉인
             로드 시 불일치 → 즉시 거부

변조 감지:   주기적 스캔 → 감지 시 격리 + 알림

격리 저장:   외부 네트워크 분리 경로
             읽기/쓰기 = 엔진 프로세스 전용
```

```han
    보안설정:
        무결성서명 = 참
        변조감지주기 = 1시간
        변조감지시처리 = 격리   // 격리 | 알림만 | 자동롤백
        알림경로 = "logs/security.log"
        뱅크경로 = "/secure/kbank/"
        외부접근차단 = 참
        쓰기권한 = 엔진전용
    보안설정끝
```

-----

### D. 재생산 라벨 + 계보 표기 + 롤백

**계보 표기 체계**

```
문자  전체변경 or 숫자 10000 도달 시 다음 문자 진급
숫자  부분수정 10회 = +1 (내부 소숫점 관리, 저장 시 버림/floor)
병합  문자 연결 + 숫자 합산 (A4 + B4 = AB8)
이식  항상 부분만 가능 → 숫자만 누적
독립  문자 5개 + 숫자 10000 → 새 루트 독립 + 참조링크 보존
충돌  현재 소유자 지식 우선, 상대 지식은 계보에만 보존
```

**롤백 정책**

```
보관   현재 + 이전 3단계
연쇄   오염 감지 시 이전 단계 자동 검증 (SHA-256 대조)
       3단계 모두 오염 → 전체 격리 + 알림
분할   불가 → 롤백으로 대체
폐기   소유자 명시적 결정 시만 삭제
```

**재생산라벨 블록**

```han
// 최소 — 엔진이 전부 자동 채움
재생산라벨끝

// 선택 추가
재생산라벨
    메모 = "3공장 이전 후 재학습분"
    태그 = ["긴급패치", "품질이슈"]
재생산라벨끝
// 블록 없으면 저장/불러오기 차단
```

-----

### E. 감사 로그 + 소유 증거 출력

**감사 로그**

```
조회 시     누가 / 언제 / 무엇을 읽었는지 전부 기록
열람 권한   소유자만 감사 로그 열람 가능
목적        가공/유출 추적
```

**소유 증거 출력** (계약서와 함께 법적 증거로 활용)

```han
지식증거출력 "공장AI_v1":
    항목 = [최초봉인값, 소유자ID, 생성일시, 변경이력]
    형식 = PDF             // PDF | JSON
지식증거출력끝
```

-----

### F. 기타 기능

```han
// ── 외부 AI 공유 (MCP) ──────────────────────────────
지식뱅크MCP "공장AI_v1":
    노출항목 = [온톨로지규칙, 추론결과]
    노출제외 = [민감정보, 개인정보]
    인증 = API키
지식뱅크MCP끝

// ── 버전 비교 및 병합 ───────────────────────────────
지식비교 "공장AI_v1" vs "공장AI_v2":
    충돌규칙 = 현재소유자우선
    병합결과저장 = "공장AI_v3"
지식비교끝
```

### 이식 시나리오별 동작

|시나리오                  |처리 방식                        |
|----------------------|-----------------------------|
|Kcode → Kcode (동일 임베딩)|전체 자산 직접 이식                  |
|Kcode → Kcode (다른 임베딩)|온톨로지/모델 이식 + 벡터 재생성          |
|Kcode → 외부 AI         |MCP/REST로 지식 쿼리 제공           |
|외부 AI → Kcode         |JSON 수신 → 온톨로지 삽입 + 세션ID 기록  |
|오염 감지 시               |재생산 라벨 역추적 → 파생 지식 연쇄 격리 → 롤백|

### 미결 사항

|항목              |상태           |
|----------------|-------------|
|소유자 변경 민원 처리 로직 |추후 외부 로직으로 구현|
|독립 후 원조 계보 이식 처리|추후 논의        |
|외부 AI 역등록 계보 표기 |추후 논의        |
|동시 수정 충돌 처리     |추후 논의        |

### 구현 단계

|단계|내용                                                          |신규 파일|상태|
|--|------------------------------------------------------------|-----|--|
|1 |`kc_kbank.h/c` — 지식 뱅크 코어 자료구조 + 저장/불러오기                    |신규 2종|⬜ |
|2 |권한 계층 — 개발자/소유자/사용자/비허용자 접근 제어                              |기존 확장|⬜ |
|3 |권한 계층 — 읽기권한 설정 (비공개/전체공개/지정공개)                             |기존 확장|⬜ |
|4 |권한 계층 — 소유자 변경 허용/고정 설정 + ID 폐기 처리                          |기존 확장|⬜ |
|5 |필수 게이트 1 — 소유권 선언 강제 (배포자/일시/사용자ID)                         |기존 확장|⬜ |
|6 |필수 게이트 1 — 병합/등업 시 메타데이터 자동 처리                              |기존 확장|⬜ |
|7 |필수 게이트 2 — 민감정보 자동 스캔 (차단/자동제거/익명화)                         |신규 1종|⬜ |
|8 |필수 게이트 3 — 검증 이력 봉인 + 안전시스템 로드 차단                           |기존 확장|⬜ |
|9 |보안 레이어 — SHA-256 무결성 서명 + .sig 봉인 파일                        |신규 1종|⬜ |
|10|보안 레이어 — 주기적 변조 감지 + 격리 + 알림                                |기존 확장|⬜ |
|11|보안 레이어 — 격리 저장 경로 + 엔진 전용 접근 제어                             |기존 확장|⬜ |
|12|재생산 라벨 — 계보ID 자동 계산 (문자+숫자 체계)                              |신규 1종|⬜ |
|13|재생산 라벨 — 오염 감지 시 파생 지식 연쇄 회수                                |기존 확장|⬜ |
|14|재생산 라벨 — 순환 참조 감지                                           |기존 확장|⬜ |
|15|롤백 — 3단계 보관 + 연쇄 롤백 + SHA-256 검증                            |기존 확장|⬜ |
|16|감사 로그 — 조회 이력 전체 기록 + 소유자 열람                                |기존 확장|⬜ |
|17|소유 증거 출력 — PDF/JSON 봉인값/이력 출력                               |신규 1종|⬜ |
|18|온톨로지 규칙 직렬화/역직렬화 — JSON/Turtle/OWL                          |기존 확장|⬜ |
|19|벡터 스냅샷 내보내기/가져오기 + 임베딩 호환성 검사                               |기존 확장|⬜ |
|20|ONNX 모델 버전 저장소 — 저장/불러오기/버전 태깅                              |기존 확장|⬜ |
|21|지식 병합 엔진 — 충돌 감지 + 현재소유자 우선 정책                              |신규 1종|⬜ |
|22|MCP 자동 노출 — 지식 뱅크 항목 MCP 도구 자동 등록                           |기존 확장|⬜ |
|23|REST API — 지식 CRUD + 버전/무결성/계보/감사 조회                        |기존 확장|⬜ |
|24|klexer/kparser — `지식뱅크` `지식불러오기` `지식비교` `재생산라벨` `지식증거출력` 키워드|기존 확장|⬜ |
|25|kinterp/kcodegen/kcodegen_llvm 연동                           |기존 확장|⬜ |
|26|통합 테스트 — 보안/권한/계보/롤백/이식 전체 시나리오 검증                          |—    |⬜ |

-----

## 🔲 v19.0.0 — WEB IDE 기본 완성

> 브라우저 기반 통합 개발 환경 — 레이아웃 + 에디터 + WASM 실행

### 핵심 5개 영역

```
┌──────────────── 메뉴바 ────────────────────┐
│ 문법탐색기 │    편집기 (블록/타이핑)    │ AI채팅 │
│           │                            │       │
└───────────┴──────── 출력/오류 패널 ─────┴───────┘
```

|단계|내용                                          |상태|
|--|--------------------------------------------|--|
|1 |HTML/CSS 레이아웃 — 5개 영역 분할                    |⬜ |
|2 |Monaco Editor + kc_wasm_lex 토큰 하이라이팅        |⬜ |
|3 |WASM 로더 (kcode-wasm.js) + 실행 버튼 연결          |⬜ |
|4 |하단 출력·오류 패널 (출력/오류/토큰/AST/로그 탭)             |⬜ |
|5 |좌측 문법 탐색기 — 분류별 트리                          |⬜ |
|6 |외부 LLM 선택 UI (ChatGPT/Grok/Gemini/Claude/로컬)|⬜ |
|7 |AI 채팅 패널 — LLM API 연동                       |⬜ |
|8 |kserver 폴백 모드 (LLVM IR / C코드 생성)            |⬜ |

-----

## 🔲 v19.5.0 — 블록 캔버스 (시각적 편집기)

> 블록 이미지 방식 코드 작성 + 타이핑 양방향 동기화

### 블록 색상 시스템

|블록 유형 |색상        |형태        |
|------|----------|----------|
|함수/정의 |파랑 #2E5FA3|타원 (상단 고정)|
|데이터/변수|녹색 #2E7D32|둥근 사각형    |
|주석    |회색 #757575|점선 사각형    |
|문법/제어 |노랑 #F9A825|육각형       |
|계약    |빨강 #C62828|방패형       |
|AI 블록 |흰색+검정테두리  |다이아몬드     |

|단계|내용                       |상태|
|--|-------------------------|--|
|1 |블록 캔버스 기본 — 6종 드래그 블록    |⬜ |
|2 |함수·정의 타원 블록 상단 고정 + 클릭 팝업|⬜ |
|3 |블록 간 연결선 자동 생성           |⬜ |
|4 |블록 ↔ 타이핑 양방향 실시간 동기화     |⬜ |
|5 |블록 내보내기 (PNG / SVG)      |⬜ |

-----

## 🔲 v20.0.0 — 표준 UI 객체 시스템

> 사용자가 Kcode로 UI를 직접 제작할 수 있는 표준 위젯 라이브러리

### 표준 UI 객체 분류

|분류   |객체 목록                                 |
|-----|--------------------------------------|
|입력   |버튼, 텍스트입력, 체크박스, 라디오, 슬라이더, 드롭다운, 파일선택|
|표시   |레이블, 텍스트박스, 이미지뷰, 프로그레스바, 배지, 툴팁      |
|컨테이너 |패널, 탭, 스크롤뷰, 모달, 팝업, 아코디언, 카드         |
|데이터  |테이블, 리스트뷰, 트리뷰, 페이지네이션                |
|차트   |선그래프, 막대그래프, 원형그래프, 산점도, 히트맵          |
|네비게이션|메뉴바, 사이드바, 브레드크럼, 스텝퍼                 |
|피드백  |알림(토스트), 경보, 로딩스피너, 스켈레톤              |

### Kcode 문법 예시

```han
UI화면 "메인대시보드":
    패널 배치=수직:
        레이블 "온도 모니터" 크기=20 굵게
        선그래프 데이터=온도기록 너비=600 높이=300
        버튼 "새로고침" 클릭=데이터갱신
        테이블 데이터=센서목록 열=["이름","값","상태"]
    패널끝
UI화면끝
```

|단계|내용                               |상태|
|--|---------------------------------|--|
|1 |표준객체 토큰 설계 — klexer/kparser 추가   |⬜ |
|2 |kc_ui_object.h/c — 위젯 자료구조 + CRUD|⬜ |
|3 |입력 위젯 7종 구현 (버튼/텍스트입력 등)         |⬜ |
|4 |표시 위젯 6종 구현 (레이블/이미지뷰 등)         |⬜ |
|5 |컨테이너 위젯 6종 구현 (패널/탭/모달 등)        |⬜ |
|6 |데이터 위젯 4종 (테이블/리스트/트리)           |⬜ |
|7 |차트 위젯 5종 (선/막대/원형/산점도/히트맵)       |⬜ |
|8 |WEB IDE 팔레트 패널 — 드래그 앤 드롭 배치     |⬜ |
|9 |미리보기 패널 — 실시간 UI 렌더링             |⬜ |
|10|kinterp/kcodegen/kcodegen_llvm 연동|⬜ |
|11|WASM 렌더러 연동                      |⬜ |

-----

## 🔲 v20.5.0 — 이미지 처리 시스템

> Kcode에서 이미지 로드 · 조작 · 저장 · AI 연동

|분류   |내장함수                          |
|-----|------------------------------|
|로드/저장|이미지열기, 이미지저장, 이미지캡처           |
|기본 조작|크기조정, 자르기, 회전, 뒤집기, 밝기, 대비, 채도|
|색상 처리|흑백변환, 색상필터, 채널분리, 히스토그램       |
|합성   |이미지합치기, 레이어혼합, 투명도설정, 마스킹     |
|AI 연동|객체감지(ONNX), 분류추론, 세그멘테이션      |
|포맷   |PNG/JPG/BMP/WebP/SVG 지원       |

|단계|내용                               |상태|
|--|---------------------------------|--|
|1 |kc_image.h/c — 이미지 자료구조 + 로드/저장  |⬜ |
|2 |기본 조작 함수 8종 (크기조정/자르기/회전 등)      |⬜ |
|3 |색상 처리 함수 4종                      |⬜ |
|4 |합성/레이어 함수 4종                     |⬜ |
|5 |이미지↔텐서 변환 (AI 연동 브릿지)            |⬜ |
|6 |klexer/kparser — 이미지 키워드 추가      |⬜ |
|7 |kinterp/kcodegen/kcodegen_llvm 연동|⬜ |
|8 |WEB IDE 이미지 미리보기 패널              |⬜ |
|9 |WASM 이미지 처리 (Canvas API 연동)      |⬜ |

-----

## 🔲 v21.0.0 — 렌더링 시스템

> 2D / 3D 렌더링 + 애니메이션 + 실시간 시각화

```
kc_render.h/c
    ├── 2D 렌더러  (Canvas2D / SVG)
    ├── 3D 렌더러  (WebGL / OpenGL)
    └── 애니메이션 (타임라인 + 이징)
```

|단계|내용                                 |상태|
|--|-----------------------------------|--|
|1 |kc_render.h/c — 렌더러 코어 + 씬 그래프 자료구조|⬜ |
|2 |2D 렌더러 — 도형/텍스트/이미지/스타일 20종        |⬜ |
|3 |2D 변환 함수 5종 + Canvas2D 브릿지         |⬜ |
|4 |3D 렌더러 — 기하/카메라/조명/재질 (WebGL)      |⬜ |
|5 |3D 씬 관리 + 오브젝트 계층 구조               |⬜ |
|6 |애니메이션 시스템 — 키프레임 + 이징              |⬜ |
|7 |물리 엔진 기초 — 중력/충돌 감지                |⬜ |
|8 |klexer/kparser — 렌더링 키워드 추가        |⬜ |
|9 |kinterp/kcodegen/kcodegen_llvm 연동  |⬜ |
|10|WEB IDE 렌더링 캔버스 패널                 |⬜ |
|11|WASM WebGL 렌더러 연동                  |⬜ |
|12|산업 시각화 — 게이지, 계기판, 플로우차트           |⬜ |

-----

## 🔲 v21.5.0 — PC 서버화

> 개인/산업용 PC를 AI 제어 허브 서버로

|단계|내용                                 |상태|
|--|-----------------------------------|--|
|1 |kserver.c 전면 확장 — HTTP/WebSocket 블록|⬜ |
|2 |REST API 자동 생성                     |⬜ |
|3 |외부 접속 / 인증 / TLS                   |⬜ |
|4 |MCP 서버 영구 호스팅                      |⬜ |
|5 |실시간 대시보드 (렌더링 시스템 연동)              |⬜ |

-----

## 🔲 v22.0.0 — 패키지 생태계

> 모듈 레지스트리 + FFI + SDK

|단계|내용                           |상태|
|--|-----------------------------|--|
|1 |패키지 레지스트리 서버                 |⬜ |
|2 |FFI — C/Python/JS 외부 함수 직접 호출|⬜ |
|3 |Python SDK / Node.js SDK     |⬜ |
|4 |패키지 배포 도구 (kpkg)             |⬜ |
|5 |표준 UI 객체 패키지 배포              |⬜ |
|6 |렌더링 확장 패키지 (게임엔진, 시뮬레이터)     |⬜ |

-----

## 전체 순서 요약

```
v18.1.0  내장함수 31종              ✅ 완료
v18.5.0  온톨로지 시스템            ⬜ 다음 작업
v18.7.0  Concept Identity         ⬜ 의미→벡터→실행→검증→기억
         / Vector Space
v18.9.0  지식 뱅크                 ⬜ 학습 지식 저장·이식·외부AI공유
v19.0.0  WEB IDE 기본              ⬜ 레이아웃+에디터+WASM실행
v19.5.0  블록 캔버스               ⬜ 시각적 블록 편집기
v20.0.0  표준 UI 객체              ⬜ 위젯 라이브러리 32종
v20.5.0  이미지 처리               ⬜ 로드/조작/AI연동
v21.0.0  렌더링 시스템             ⬜ 2D/3D/애니메이션/물리
v21.5.0  PC 서버화                 ⬜ REST/MCP/WS 자동 생성
v22.0.0  패키지 생태계             ⬜ 모듈 레지스트리+FFI+SDK
```

-----

## 버전 정책

|변경 규모         |버전 올림              |
|--------------|-------------------|
|소규모 수정 (1~2파일)|v x.x.1 → v x.x.2  |
|중규모 추가 (3~4파일)|v x.0.0 → v x.1.0  |
|대규모 (5파일 이상)  |v 18.x.x → v 19.0.0|

-----

*Kcode — 한글 AI 제어 언어*  
*언어 엔진 → WEB IDE → UI/렌더링 → 생태계*